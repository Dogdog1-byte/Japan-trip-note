<!DOCTYPE html>
<html class="light" lang="zh-Hant">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>我的日本行程</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "primary-content": "#0a2815",
                        "background-light": "#f6f8f6",
                        "background-dark": "#102216",
                        "surface-light": "#ffffff",
                        "surface-dark": "#1a2f23",
                        "text-main-light": "#102216",
                        "text-main-dark": "#f6f8f6",
                        "text-sub-light": "#5c6f60",
                        "text-sub-dark": "#a3b5a7",
                    },
                    fontFamily: {
                        "display": ["Plus Jakarta Sans", "Noto Sans TC", "sans-serif"],
                        "sans": ["Plus Jakarta Sans", "Noto Sans TC", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "1rem", "lg": "1.5rem", "xl": "2rem", "2xl": "2.5rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Plus Jakarta Sans', 'Noto Sans TC', sans-serif;
            min-height: max(884px, 100dvh);
        }

        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark min-h-screen text-text-main-light dark:text-text-main-dark flex justify-center">
    <div
        class="relative flex h-full min-h-screen w-full max-w-md flex-col overflow-x-hidden bg-background-light dark:bg-background-dark pb-24">
        <header
            class="sticky top-0 z-10 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-sm px-4 pt-8 pb-2">
            <div class="flex items-center justify-between mb-4">
                <h1 class="text-3xl font-extrabold tracking-tight">我的日本行程</h1>
            </div>
            <div class="relative w-full">
                <label
                    class="flex items-center h-12 w-full rounded-full bg-surface-light dark:bg-surface-dark shadow-sm px-4 focus-within:ring-2 focus-within:ring-primary transition-shadow">
                    <span
                        class="material-symbols-outlined text-text-sub-light dark:text-text-sub-dark mr-3">search</span>
                    <input
                        class="w-full bg-transparent border-none p-0 text-base placeholder-text-sub-light dark:placeholder-text-text-sub-dark focus:ring-0 text-text-main-light dark:text-text-main-dark"
                        placeholder="搜尋行程或年份" type="text" />
                </label>
            </div>
        </header>

        <div class="flex gap-2 px-4 py-2 overflow-x-auto no-scrollbar mask-linear-fade">
            <button
                class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-primary text-primary-content px-5 shadow-sm shadow-primary/20">
                <span class="text-sm font-bold">全部</span>
            </button>
            <button
                class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-surface-light dark:bg-surface-dark border border-gray-100 dark:border-gray-800 px-5">
                <span class="text-sm font-medium text-text-sub-light dark:text-text-sub-dark">即將出發</span>
            </button>
            <button
                class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-surface-light dark:bg-surface-dark border border-gray-100 dark:border-gray-800 px-5">
                <span class="text-sm font-medium text-text-sub-light dark:text-text-sub-dark">進行中</span>
            </button>
            <button
                class="flex h-9 shrink-0 items-center justify-center gap-x-2 rounded-full bg-surface-light dark:bg-surface-dark border border-gray-100 dark:border-gray-800 px-5">
                <span class="text-sm font-medium text-text-sub-light dark:text-text-sub-dark">已結束</span>
            </button>
        </div>

        <div class="flex flex-col gap-5 p-4" id="trips-container">
            <!-- Dynamic content will be injected here -->
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const container = document.getElementById('trips-container');
                const defaultTrips = [
                    {
                        id: 1,
                        name: '黃金週冒險',
                        dest: '日本',
                        start: '2024-05-01',
                        end: '2024-05-07',
                        status: 'upcoming',
                        image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuD2JfCZ5g5fwbXBV6VGEXI4sGhm64rtz0vcHFkPr-WbVrZ5ko6X1GluuokEPQXWOrJbkqbEwfrnh0T-GSN8VT2V6LDh31V6Nm9p0FCg3TAfAchdzHwYI3JdkCh1BpUDVgESzON-8mN9dIsGrpp824fUpUGwsv605aFGtq-M2ewPSXQ8xisKO1nXwI7JyaitpyV_mHy70QsI1PO72xhhle4RfOvN_FgOGKRAq0Mg3hZUqQdSEyMaAu2AuWPPZgFvPpOwvLpF4a2KpjY',
                        tag: '即將出發'
                    },
                    {
                        id: 2,
                        name: '大阪美食之旅',
                        dest: '大阪',
                        start: '2024-10-10',
                        end: '2024-10-15',
                        status: 'planned',
                        image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAFnCiSoxep1PcYgHroix5PcUkqiXmLY39FAwlVPIc-xeQF2OIo07m2a3qy3skuaQT3I0agPWD-uyyAzBeDK3uAJUUvKXC4UL9wNyf079sPXyFqdjyN4go6rKSoDGIkrdOr5bqKFwU4JMGreUEKdwoPdBXyfu9uQ426XeoHIm2kj_N1wgUq_-wVCOc-fMOuKXhq0T6F4eJ_gTmwFecMv8PRJeRAGXIlL8MAC95kU426XeoHIm2kj_N1wgUq_-wVCOc-fMOuKXhq0T6F4eJ_gTmwFecMv8PRJeRAGXIlL8MAC95kU48mj33oQ1QdaguHLGKdmqdQ4Rvi1UQ1dhLeBCc',
                        tag: '已規劃'
                    },
                    {
                        id: 3,
                        name: '北海道之冬',
                        dest: '北海道',
                        start: '2025-02-02',
                        end: '2025-02-10',
                        status: 'draft',
                        image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuCEHSaIYCTNoW1ncmt9jdAV2lAp_JNn0_Mrurq3bvUcor1aoWPDAwXiLG59oQxciPPHE8oexG5Q4CWwfoL4aMrtrgm6C_PsKk1mYWUuTB6t9TXEs7RNoB902H39vvLo4oiruOo95we_ImWtcmwhJM7eA9YaXqQRC-eBUTZEfspDeJdMZVfdZMbi62OYfk1Sui69V5Uo4x8n68-2ixRvPtUx7daes_SAOFbV8CSN_9WSHKLdf3yuv5QU_pmNJ-oEVzj0YMpHRq5EQkY',
                        tag: '草稿'
                    }
                ];

                let storedTrips = JSON.parse(localStorage.getItem('japan_trips'));

                // Initialize if empty
                if (!storedTrips || storedTrips.length === 0) {
                    storedTrips = defaultTrips;
                    localStorage.setItem('japan_trips', JSON.stringify(defaultTrips));
                }

                container.innerHTML = storedTrips.map(trip => {
                    // Logic to format date and tags
                    const formatDate = (dateStr) => {
                        const [y, m, d] = dateStr.split('-');
                        return `${y}年 ${parseInt(m)}月 ${parseInt(d)}日`;
                    };
                    const dateDisplay = `${formatDate(trip.start)} - ${formatDate(trip.end)}`;
                    let tagClass = 'bg-primary/90 text-primary-content';
                    if (trip.status === 'planned') tagClass = 'bg-surface-light/20 border border-white/30 text-white';
                    if (trip.status === 'draft') tagClass = 'bg-surface-light/20 border border-white/30 text-white';

                    let tagName = trip.tag || '規劃中';
                    if (trip.status === 'upcoming') tagName = '即將出發';
                    if (trip.status === 'planning') tagName = '規劃中';

                    return `
                    <div class="group relative flex flex-col rounded-2xl bg-surface-light dark:bg-surface-dark shadow-sm overflow-hidden transition-all active:scale-[0.98]">
                        <a href="detail.html?id=${trip.id}" class="block">
                            <div class="relative h-48 w-full overflow-hidden">
                                <div class="absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-105" style="background-image: url('${trip.image}');"></div>
                                <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                                <div class="absolute top-4 left-4">
                                    <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-bold backdrop-blur-md ${tagClass}">
                                        ${tagName}
                                    </span>
                                </div>
                            </div>
                        </a>
                        <!-- Delete Button (Overlay) -->
                        <button onclick="deleteTrip(${trip.id}, event)" class="absolute top-3 right-3 z-10 p-2 bg-black/40 hover:bg-red-500/80 rounded-full text-white backdrop-blur-md transition-colors">
                            <span class="material-symbols-outlined text-lg">delete</span>
                        </button>

                        <a href="detail.html?id=${trip.id}" class="block p-5">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-xl font-bold leading-tight text-text-main-light dark:text-text-main-dark">${trip.name}</h3>
                            </div>
                            <div class="flex items-center gap-2 text-text-sub-light dark:text-text-sub-dark text-sm font-medium mb-3">
                                <span class="material-symbols-outlined text-lg">calendar_month</span>
                                <span>${dateDisplay}</span>
                            </div>
                            <div class="flex items-center justify-between mt-4">
                                <div class="flex -space-x-2">
                                     <div class="flex h-8 w-8 items-center justify-center rounded-full bg-primary/20 ring-2 ring-surface-light dark:ring-surface-dark text-primary font-bold text-xs">我</div>
                                </div>
                                <span class="text-xs font-bold text-primary cursor-pointer hover:underline flex items-center gap-1">
                                    查看行程 <span class="material-symbols-outlined text-base">arrow_forward</span>
                                </span>
                            </div>
                        </a>
                    </div>
                    `;
                }).join('') + '<div class="h-20"></div>';
            });

            function deleteTrip(tripId, event) {
                event.preventDefault(); // Prevent link navigation
                if (!confirm('確定要刪除整個行程嗎？此動作無法復原。')) return;

                let trips = JSON.parse(localStorage.getItem('japan_trips') || '[]');
                trips = trips.filter(t => t.id != tripId);
                localStorage.setItem('japan_trips', JSON.stringify(trips));

                // Reload page to reflect changes
                window.location.reload();
            }
        </script>

        <!-- Floating Action Button -->
        <div class="fixed bottom-24 right-6 z-20">
            <a href="create.html"
                class="flex items-center justify-center h-14 w-14 rounded-full bg-primary text-primary-content shadow-lg hover:shadow-xl hover:bg-primary/90 transition-all active:scale-95">
                <span class="material-symbols-outlined text-3xl">add</span>
            </a>
        </div>

        <!-- Bottom Navigation -->
        <nav
            class="fixed bottom-0 z-30 w-full max-w-md bg-surface-light dark:bg-surface-dark border-t border-gray-100 dark:border-gray-800 pb-safe pt-2">
            <div class="flex justify-around items-center h-16 px-2">
                <a href="trips.html"
                    class="flex flex-col items-center justify-center w-full h-full space-y-1 text-primary">
                    <span class="material-symbols-outlined font-variation-settings-fill">home</span>
                    <span class="text-[10px] font-bold">首頁</span>
                </a>
                <a href="checklist.html"
                    class="flex flex-col items-center justify-center w-full h-full space-y-1 text-text-sub-light dark:text-text-sub-dark hover:text-text-main-light dark:hover:text-text-main-dark transition-colors">
                    <span class="material-symbols-outlined">checklist</span>
                    <span class="text-[10px] font-medium">待辦</span>
                </a>
                <a href="collaborate.html"
                    class="flex flex-col items-center justify-center w-full h-full space-y-1 text-text-sub-light dark:text-text-sub-dark hover:text-text-main-light dark:hover:text-text-main-dark transition-colors">
                    <span class="material-symbols-outlined">group</span>
                    <span class="text-[10px] font-medium">協作</span>
                </a>
                <a href="settings.html"
                    class="flex flex-col items-center justify-center w-full h-full space-y-1 text-text-sub-light dark:text-text-sub-dark hover:text-text-main-light dark:hover:text-text-main-dark transition-colors">
                    <span class="material-symbols-outlined">settings</span>
                    <span class="text-[10px] font-medium">設定</span>
                </a>
            </div>
        </nav>
    </div>
</body>

</html>